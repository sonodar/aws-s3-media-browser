# Requirements Document

## Introduction

本ドキュメントは、Amplify UI を使った S3 認証付きメディアブラウザの要件を定義する。このアプリケーションは個人用の SPA として実装され、Amplify Gen2 と Cognito 認証を使用して S3 バケット内のメディアファイルをブラウジング・アップロードする機能を提供する。

## Requirements

### Requirement 1: 認証機能

**Objective:** As a ユーザー, I want Cognito 認証でセキュアにサインインしたい, so that 自分のメディアファイルに安全にアクセスできる

#### Acceptance Criteria

1. When ユーザーがサインインフォームに認証情報を入力して送信した場合, the メディアブラウザ shall Cognito に認証リクエストを送信し、成功時にメインページへリダイレクトする
2. When ユーザーがサインアウトボタンをクリックした場合, the メディアブラウザ shall セッションを終了し、サインインページへリダイレクトする
3. While ユーザーが未認証状態の場合, the メディアブラウザ shall メインコンテンツへのアクセスをブロックし、サインインページを表示する
4. While 有効なセッションが存在する場合, the メディアブラウザ shall 自動的にセッションを維持し、トークンをリフレッシュする
5. If 認証に失敗した場合, the メディアブラウザ shall エラーメッセージを表示し、再試行を促す
6. The メディアブラウザ shall Amplify Auth コンポーネントを使用してサインイン/サインアウト UI を提供する

### Requirement 2: ファイルブラウジング機能

**Objective:** As a ユーザー, I want S3 バケット内のファイルとフォルダを閲覧したい, so that 保存されているメディアを確認・探索できる

#### Acceptance Criteria

1. When ユーザーが認証済みでメインページにアクセスした場合, the メディアブラウザ shall S3 バケットのルートディレクトリ内容を一覧表示する
2. When ユーザーがフォルダをクリックした場合, the メディアブラウザ shall そのフォルダ内のファイルとサブフォルダを表示する
3. When ユーザーが戻るナビゲーションを実行した場合, the メディアブラウザ shall 親フォルダの内容を表示する
4. When ユーザーが画像ファイルを選択した場合, the メディアブラウザ shall プレビューモーダルで画像を表示する
5. When ユーザーが動画ファイルを選択した場合, the メディアブラウザ shall プレビューモーダルで動画プレーヤーを表示する
6. While ファイル一覧を読み込み中の場合, the メディアブラウザ shall ローディングインジケータを表示する
7. If ファイル一覧の取得に失敗した場合, the メディアブラウザ shall エラーメッセージを表示し、再読み込みオプションを提供する
8. The メディアブラウザ shall 画像ファイルにはサムネイルを表示する

### Requirement 3: ファイルアップロード機能

**Objective:** As a ユーザー, I want ローカルファイルを S3 にアップロードしたい, so that メディアをクラウドに保存できる

#### Acceptance Criteria

1. When ユーザーがファイル選択ダイアログからファイルを選択した場合, the メディアブラウザ shall 選択されたファイルを現在のフォルダにアップロードする
2. When ユーザーがファイルをドロップゾーンにドラッグ&ドロップした場合, the メディアブラウザ shall ドロップされたファイルを現在のフォルダにアップロードする
3. When 複数のファイルが選択された場合, the メディアブラウザ shall すべてのファイルを並列でアップロードする
4. While ファイルをアップロード中の場合, the メディアブラウザ shall 各ファイルのアップロード進捗率を表示する
5. When ファイルのアップロードが完了した場合, the メディアブラウザ shall ファイル一覧を自動的に更新する
6. If ファイルのアップロードに失敗した場合, the メディアブラウザ shall エラーメッセージを表示し、再試行オプションを提供する
7. The メディアブラウザ shall アップロード可能なファイルサイズの上限を設定する

### Requirement 4: ファイル管理機能

**Objective:** As a ユーザー, I want ファイルとフォルダを管理したい, so that メディアを整理できる

#### Acceptance Criteria

1. When ユーザーがファイルの削除を実行した場合, the メディアブラウザ shall 確認ダイアログを表示し、確認後に S3 からファイルを削除する
2. When ユーザーが新規フォルダ作成を実行した場合, the メディアブラウザ shall フォルダ名入力ダイアログを表示し、S3 に新しいフォルダを作成する
3. When ファイルまたはフォルダの削除が完了した場合, the メディアブラウザ shall ファイル一覧を自動的に更新する
4. If ファイルまたはフォルダの削除に失敗した場合, the メディアブラウザ shall エラーメッセージを表示する
5. If フォルダの作成に失敗した場合, the メディアブラウザ shall エラーメッセージを表示する

### Requirement 5: ユーザーインターフェース

**Objective:** As a ユーザー, I want 直感的で使いやすい UI を利用したい, so that 効率的にメディアを管理できる

#### Acceptance Criteria

1. The メディアブラウザ shall Amplify UI コンポーネントライブラリを使用して一貫したデザインを提供する
2. The メディアブラウザ shall デスクトップとモバイルの両方で適切に表示されるレスポンシブデザインを実装する
3. The メディアブラウザ shall 現在のフォルダパスを示すパンくずリストナビゲーションを表示する
4. While 任意の非同期操作を実行中の場合, the メディアブラウザ shall 適切なローディング状態を表示する
5. If エラーが発生した場合, the メディアブラウザ shall ユーザーフレンドリーなエラーメッセージを表示する
6. The メディアブラウザ shall グリッド表示とリスト表示の切り替え機能を提供する

## Out of Scope

以下の機能は本プロジェクトの対象外とする:

- ファイル共有機能
- マルチユーザー対応
- ファイル検索機能
- ファイルのバージョン管理
- オフラインサポート
- ファイルの編集機能
